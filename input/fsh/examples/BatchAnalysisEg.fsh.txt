Alias: $pq-quality-specification-extension = http://hl7.org/fhir/us/pq-cmc-fda/StructureDefinition/pq-quality-specification-extension
Alias: $pqcmc-drug-product-instance = http://hl7.org/fhir/us/pq-cmc-fda/StructureDefinition/pqcmc-drug-product-instance
Alias: $pqcmc-drug-substance-batch = http://hl7.org/fhir/us/pq-cmc-fda/StructureDefinition/pqcmc-drug-substance-batch
Alias: $cmc-organization = http://hl7.org/fhir/us/pq-cmc-fda/StructureDefinition/cmc-organization
Alias: $pq-result-observation = http://hl7.org/fhir/us/pq-cmc-fda/StructureDefinition/pq-result-observation

Profile: BatchAnalysis
Parent: DiagnosticReport
Id: pqcmc-batch-analysis
Title: "Batch Analysis"
Description: "Batch or lot release testing  to ensure that pharmaceutical products meet the product specification."
* ^extension.url = "http://hl7.org/fhir/StructureDefinition/structuredefinition-wg"
* ^extension.valueCode = #brr
* ^url = "http://hl7.org/fhir/us/pq-cmc-fda/StructureDefinition/pqcmc-batch-analysis"
* ^identifier.system = "urn:ietf:rfc:3986"
* ^identifier.value = "urn:oid:2.16.840.1.113883.4.642.40.36.42.88"
* ^version = "3.0.0-ballot"
* ^status = #active
* ^date = "2024-12-12T18:43:31-05:00"
* ^publisher = "HL7 International / Biomedical Research and Regulation"
* ^contact.name = "HL7 International / Biomedical Research and Regulation"
* ^contact.telecom[0].system = #url
* ^contact.telecom[=].value = "http://www.hl7.org/Special/committees/rcrim"
* ^contact.telecom[+].system = #email
* ^contact.telecom[=].value = "brr@lists.HL7.org"
* ^jurisdiction = urn:iso:std:iso:3166#US "United States of America"
* extension contains $pq-quality-specification-extension named qualitySpecification 1..1 MS
* identifier ..1 MS
* identifier ^short = "optional user designated identifier"
* status MS
* status ^short = "Status of the batch analysis"
* status ^definition = "The status of the batch analysis. Consult the HL7 list of permitted values in http://hl7.org/fhir/ValueSet/diagnostic-report-status"
* code MS
* code ^short = "Name for this batch analysis."
* code.text 1.. MS
* subject 1.. MS
* subject only Reference($pqcmc-drug-product-instance or $pqcmc-drug-substance-batch)
* subject ^short = "A single medication batch/lot or a single subtance batch/lot"
* effectiveDateTime 1..1 MS
* effectiveDateTime only dateTime
* effectiveDateTime ^sliceName = "effectiveDateTime"
* effectiveDateTime ^short = "Batch Analysis Release Date"
* effectiveDateTime ^definition = "The date at which the drug substance or drug product is released by the quality assurance unit of the sponsor/applicant. [Source: SME Defined]\nNote: A single release date per batch."
* performer 1..1 MS
* performer only Reference($cmc-organization)
* performer ^short = "Test Site"
* performer ^definition = "Reference to the organization profile that contains: \n* Testing Site Name: The name of the establishment (facility) which tests the raw materials, intermediates, drug substance, drug product, packaging components, etc. [Source: SME Defined]\n* Testing Site Address: The complete address for the testing site.  [Source: SME Defined]\n* Testing Site Unique Identifier: A unique identifier assigned to the establishment (facility) which performs the testing. [Source: SME Defined]\n* Testing Site Unique identifier Type:\tA value that identifies the source of the unique identifier. [Source: SME Defined] Examples: DUNS, FEI. "
* result only Reference($pq-result-observation)
* result MS

Alias: $pq-target-range = http://hl7.org/fhir/us/pq-cmc-fda/StructureDefinition/pq-target-range
Alias: $pq-replicate-extension = http://hl7.org/fhir/us/pq-cmc-fda/StructureDefinition/pq-replicate-extension
Alias: $pqcmc-units-of-measure = http://hl7.org/fhir/us/pq-cmc-fda/ValueSet/pqcmc-units-of-measure
Alias: $pqcmc-conformance-to-criteria-terminology = http://hl7.org/fhir/us/pq-cmc-fda/ValueSet/pqcmc-conformance-to-criteria-terminology

Profile: MultipleReplicatesResultObservation
Parent: Observation
Id: pq-additional-stage-result-observation
Title: "Multiple Result Observation"
Description: "Profile for an observation in a batch-analysis report or a stability report"
* ^extension.url = "http://hl7.org/fhir/StructureDefinition/structuredefinition-wg"
* ^extension.valueCode = #brr
* ^url = "http://hl7.org/fhir/us/pq-cmc-fda/StructureDefinition/pq-additional-stage-result-observation"
* ^identifier.system = "urn:ietf:rfc:3986"
* ^identifier.value = "urn:oid:2.16.840.1.113883.4.642.40.36.42.79"
* ^version = "3.0.0-ballot"
* ^date = "2024-12-12T18:43:31-05:00"
* ^publisher = "HL7 International / Biomedical Research and Regulation"
* ^contact.name = "HL7 International / Biomedical Research and Regulation"
* ^contact.telecom[0].system = #url
* ^contact.telecom[=].value = "http://www.hl7.org/Special/committees/rcrim"
* ^contact.telecom[+].system = #email
* ^contact.telecom[=].value = "brr@lists.HL7.org"
* ^jurisdiction = urn:iso:std:iso:3166#US "United States of America"
* identifier 1..1 MS
* identifier ^short = "Stage"
* identifier ^definition = "A set of discrete sequential steps performed on a given test. [Source: SME Defined]"
* identifier ^comment = "Note: This can be named or numbered.  This will never be 'Single Stage'."
* status MS
* value[x] only Quantity or string
* value[x] MS
* valueQuantity 0..1 MS
* valueQuantity only Quantity
* valueQuantity from $pqcmc-units-of-measure (required)
* valueQuantity ^sliceName = "valueQuantity"
* valueQuantity.value 1.. MS
* valueQuantity.value ^short = "ValueNumeric"
* valueQuantity.value ^definition = "The acceptable quantitative or numeric value for the result of the test. [Source: SME Defined]"
* valueQuantity.code 1.. MS
* valueQuantity.code ^short = "ValueNumeric UOM"
* valueQuantity.code ^definition = "A named quantity in terms of which other quantities are measured or specified, used as a standard measurement of like kinds. [Source: NCI EVS - C25709]"
* valueString 0..1 MS
* valueString only string
* valueString ^sliceName = "valueString"
* valueString ^short = "Value"
* valueString ^definition = "The acceptable qualitative or text value of the result of the test. [Source: SME Defined]"
* dataAbsentReason MS
* interpretation 1..1 MS
* interpretation from $pqcmc-conformance-to-criteria-terminology (required)
* interpretation ^short = "Conformance to Criteria"
* interpretation ^definition = "A coded value specifying whether the results of a particular test on a given batch of a drug substance or a drug product comply with the acceptance criteria. [Source: SME Defined]\nExamples: Conforms, Does not Conform"
* note MS
* note ^short = "Additional Information"
* note ^definition = "A placeholder for providing any comments that are relevant to the Batch. [Source: SME Defined] \nExamples: first batch manufactured at a new facility; first batch manufactured using a new Active Pharmaceutical Ingredient (API) source, new process, new container closure, etc. "
* referenceRange 1..1 MS
* referenceRange ^definition = "Correpsonds to  Acceptance Criteria in Quality Specification. All numeric values are low and high. Use high when the Interpretation Code is 'EQ'. Only supply original text for qualitative values."
* referenceRange.modifierExtension contains targetRange 1..1 MS
* referenceRange.modifierExtension[targetRange] only $pq-target-range
* referenceRange.modifierExtension[targetRange].extension contains
    low 1..1 and
    high 1..1
* referenceRange.modifierExtension[targetRange].extension[low].value[x] from $pqcmc-units-of-measure (required)
* referenceRange.modifierExtension[targetRange].extension[high].value[x] from $pqcmc-units-of-measure (required)
* referenceRange.text MS
* referenceRange.text ^short = "Original Text"
* referenceRange.text ^definition = "The text of the acceptance criteria as provided in the specification. [Source: SME Defined] \nExamples: White to off-white cake; 22.5 - 27.5 mg/ml \nNote: This is the text as it appears in the Specification."
* referenceRange.text ^comment = "Note: For non-numeric tests, the Original Text is the only required element for referenceRange."
* component ..1 MS
* component ^short = "Replicates"
* component.extension contains $pq-replicate-extension named replicate 1..1 MS
* component.extension[replicate] ^short = "Replicate Number"
* component.extension[replicate] ^definition = "An identification number for a member of the set of results for a test, usually the sequence order in which the test was executed. Individual test are executed on multiple samples to give greater validity to the findings. [Source: SME Defined]\nExamples: Prepare six aliquots from the sample.\nTest 8 samples. If any fall above 110%, test an additional 7 samples. Record all replicate values as stated in the method."
* component.code MS
* component.code.text 1.. MS
* component.code.text ^short = "Test Name | Relative Retention Time (RRT)"
* component.code.text ^definition = "Test Name: The textual description of a procedure or analytical method. [Source: SME Defined] \n* Examples: Assay by HPLC, moisture, pH, Particle Size Distribution, Dissolution, analysis for impurities, etc. \n* Note: as defined by the sponsor \nRelative Retention Time (RRT):\tThe ratio of the retention time of a component relative to that of another used as a reference obtained under identical conditions as an alias for the name of the unidentified impurities. [Source: Adapted from USP] \n* Example: 1:23 (a ratio) \n* Note: This is the title or name of the impurity (sometimes expressed as a ratio) and not the value."
* component.value[x] 1.. MS
* component.value[x] only Quantity or string
* component.valueQuantity 0..1
* component.valueQuantity only Quantity
* component.valueQuantity from $pqcmc-units-of-measure (required)
* component.valueQuantity ^sliceName = "valueQuantity"
* component.valueQuantity.value 1.. MS
* component.valueQuantity.value ^short = "ValueNumeric"
* component.valueQuantity.value ^definition = "The acceptable quantitative or numeric value for the result of the test.[Source: SME Defined]"
* component.valueQuantity.code 1.. MS
* component.valueQuantity.code ^short = "ValueNumeric UOM"
* component.valueQuantity.code ^definition = "A named quantity in terms of which other quantities are measured or specified, used as a standard measurement of like kinds.[Source: NCI EVS - C25709]"
* component.valueString 0..1 MS
* component.valueString only string
* component.valueString ^sliceName = "valueString"
* component.valueString ^short = "Value"
* component.valueString ^definition = "The acceptable qualitative or text value of the result of the test.[Source: SME Defined]"
* component.dataAbsentReason MS
* component.interpretation 1..1 MS
* component.interpretation from $pqcmc-conformance-to-criteria-terminology (required)
* component.interpretation ^short = "Conformance to Criteria"
* component.interpretation ^definition = "A coded value specifying whether the results of a particular test on a given batch of a drug substance or a drug product comply with the acceptance criteria. [Source: SME Defined] \nExamples: Conforms, Does not Conform"
* component.referenceRange 1..1 MS
* component.referenceRange only BackboneElement
* component.referenceRange.modifierExtension contains targetRange 1..1 MS
* component.referenceRange.modifierExtension[targetRange] only $pq-target-range
* component.referenceRange.modifierExtension[targetRange].extension contains
    low 1..1 and
    high 1..1
* component.referenceRange.modifierExtension[targetRange].extension[low].value[x] from $pqcmc-units-of-measure (required)
* component.referenceRange.modifierExtension[targetRange].extension[high].value[x] from $pqcmc-units-of-measure (required)
* component.referenceRange.text MS
* component.referenceRange.text ^short = "Original Text"
* component.referenceRange.text ^definition = "The text of the acceptance criteria as provided in the specification. [Source: SME Defined] \nExamples: White to off-white cake; 22.5 - 27.5 mg/ml \nNote: This is the text as it appears in the Specification."
* component.referenceRange.text ^comment = "Note: For non-numeric tests, the Original Text is the only required element for referenceRange."